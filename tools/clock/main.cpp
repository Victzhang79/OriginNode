#include <QCoreApplication>
#include "QTimer"
#include <Password.h>
#include <QHash>
#include "Test0.h"
#include "NetRequest.h"

QTimer *gTimer = new QTimer();
QThread *t[100] = {new QThread(),new QThread(),new QThread(),};
QStringList argList;

int main(int argc, char *argv[])
{
    QByteArray data = QByteArray::fromHex("0a0a6755736572202020203d206e696c0a674f776e65722020203d206e696c0a674e616d65202020203d202754414e4b270a6753796d626f6c20203d202754414e4b270a6749636f6e202020203d2027270a6754696d656f7574203d20300a67506c6179657220203d207b7d0a6742616c616e6365203d207b7d0a67546f74616c2020203d203130303030303030300a67526f6f6d496e646578203d202731270a67526f6f6d202020203d207b7d0a6751756575652020203d207b7d0a675469636b202020203d207b7d0a674d736720202020203d207b7d0a6747616d65547970653d207b7d0a6754616e6b547970653d207b7d0a675374617274696e673d207b7d0a0a0a66756e6374696f6e205f73657455736572287055736572290a202020206755736572203d2070557365720a656e640a0a0a66756e6374696f6e20696e697428290a20202020674f776e6572203d2067557365720a2020202072656754616e6b5479706528276c6967687427290a2020202072656754616e6b5479706528276e6169766527290a2020202072656754616e6b5479706528276d696427290a2020202072656754616e6b547970652827686561767927290a2020202072656747616d65547970652827317631272c27616c6c272c276d617030272c273227290a2020202072656747616d65547970652827337633272c27616c6c272c276d617030272c273627290a2020202072657475726e20276f6b270a656e640a0a0a66756e6374696f6e2067657449636f6e28290a2020202072657475726e205f676574526573756c742867557365722c2767657449636f6e272c747275652c6749636f6e290a656e640a0a0a66756e6374696f6e205f636c6f6e6528206f626a65637420290a202020206c6f63616c206c6f6f6b75705f7461626c65203d207b7d0a202020206c6f63616c2066756e6374696f6e20636f70794f626a28206f626a65637420290a20202020202020206966207479706528206f626a6563742029207e3d20227461626c6522207468656e0a20202020202020202020202072657475726e206f626a6563740a2020202020202020656c73656966206c6f6f6b75705f7461626c655b6f626a6563745d207468656e0a20202020202020202020202072657475726e206c6f6f6b75705f7461626c655b6f626a6563745d0a2020202020202020656e640a20202020202020200a20202020202020206c6f63616c206e65775f7461626c65203d207b7d0a20202020202020206c6f6f6b75705f7461626c655b6f626a6563745d203d206e65775f7461626c650a2020202020202020666f72206b65792c2076616c756520696e20706169727328206f626a656374202920646f0a2020202020202020202020206e65775f7461626c655b636f70794f626a28206b657920295d203d20636f70794f626a282076616c756520290a2020202020202020656e640a202020202020202072657475726e207365746d6574617461626c6528206e65775f7461626c652c206765746d6574617461626c6528206f626a656374202920290a20202020656e640a2020202072657475726e20636f70794f626a28206f626a65637420290a656e640a0a0a66756e6374696f6e205f6765744f776e657228290a2020202072657475726e20674f776e65720a656e640a0a0a66756e6374696f6e205f676574546f74616c28290a2020202072657475726e2067546f74616c0a656e640a0a0a66756e6374696f6e2067657453796d626f6c28290a2020202072657475726e205f676574526573756c742867557365722c2767657453796d626f6c272c747275652c6753796d626f6c290a656e640a0a0a66756e6374696f6e20676574546f74616c537570706c7928290a2020202072657475726e205f676574526573756c742867557365722c27676574546f74616c537570706c79272c747275652c67546f74616c290a656e640a0a0a66756e6374696f6e206765744e616d6528290a2020202072657475726e205f676574526573756c742867557365722c276765744e616d65272c747275652c674e616d65290a656e640a0a0a66756e6374696f6e2067657442616c616e63654f66287055736572290a202020206966206742616c616e63655b70557365725d203d3d206e696c207468656e0a202020202020202072657475726e205f676574526573756c742867557365722c2767657442616c616e63654f66272c747275652c30290a20202020656e640a202020202020202072657475726e205f676574526573756c742867557365722c2767657442616c616e63654f66272c747275652c6742616c616e63655b70557365725d290a656e640a0a0a66756e6374696f6e205f616464526573756c742870557365722c704d6574686f642c70526573756c742c704d73672c70416c6c290a202020206c6f63616c20627566666572203d207b7d0a202020206c6f63616c20726573756c74203d2070416c6c0a202020206275666665725b276d6574686f64275d203d20704d6574686f640a202020206275666665725b27726573756c74275d203d2070526573756c740a202020206275666665725b276d7367275d202020203d20704d73670a202020206275666665725b276f776e6572275d20203d2070557365720a202020206275666665725b2773796d626f6c275d203d206753796d626f6c0a202020207461626c652e696e7365727428726573756c742c627566666572290a2020202072657475726e20726573756c740a656e640a0a0a66756e6374696f6e205f676574526573756c742870557365722c704d6574686f642c70526573756c742c704d7367290a202020206c6f63616c20627566666572203d207b7d0a202020206c6f63616c20726573756c74203d205f616464526573756c742870557365722c704d6574686f642c70526573756c742c704d73672c627566666572290a2020202072657475726e206a736f6e2e656e636f646528726573756c74290a656e640a0a0a66756e6374696f6e205f74696d656f757428290a202020206c6f63616c206b65792c760a20202020666f72206b65792c7620696e20706169727328675374617274696e672920646f0a20202020202020206c6f63616c206375724b6579203d20746f737472696e67286b6579290a202020202020202067526f6f6d5b6375724b65795d5b277469636b275d203d207b7d0a202020202020202067526f6f6d5b6375724b65795d5b2774696d65275d203d2067526f6f6d5b6375724b65795d5b2774696d65275d2b310a20202020202020206c6f63616c206375725175657565203d207b7d0a20202020202020206966202367526f6f6d5b6375724b65795d5b277175657565275d203e2030207468656e0a2020202020202020202020206375725175657565203d205f636c6f6e652867526f6f6d5b6375724b65795d5b277175657565275d290a2020202020202020656e640a202020202020202067526f6f6d5b6375724b65795d5b277175657565275d203d207b7d0a20202020202020207461626c652e696e73657274282067526f6f6d5b6375724b65795d5b277469636b275d2c20637572517565756520290a20202020656e640a2020202072657475726e20276661696c2073797374656d2074696d656f7574270a656e640a0a0a66756e6374696f6e2072656747616d655479706528705479706549442c70466967687449442c704d617049442c70506c617965724d6178290a202020206966206747616d65547970655b705479706549445d207e3d206e696c207468656e0a202020202020202072657475726e20276661696c270a20202020656e640a202020206747616d65547970655b705479706549445d203d207b7d0a202020206747616d65547970655b705479706549445d5b276669676874275d203d2070466967687449440a202020206747616d65547970655b705479706549445d5b276d6170275d2020203d20704d617049440a202020206747616d65547970655b705479706549445d5b27706c617965726d6178275d203d20746f6e756d6265722870506c617965724d6178290a2020202072657475726e20276f6b270a656e640a0a0a66756e6374696f6e2067657447616d655479706528290a202020206c6f63616c20637572526573756c74203d207b7d0a20202020637572526573756c745b276d6574686f64275d203d202767657447616d6554797065270a20202020637572526573756c745b2764617461275d203d206747616d65547970650a2020202072657475726e206a736f6e2e656e636f646528637572526573756c74290a656e640a0a0a66756e6374696f6e2072656754616e6b547970652870547970654944290a202020206966206754616e6b547970655b705479706549445d207e3d206e696c207468656e0a202020202020202072657475726e20276661696c270a20202020656e640a202020206754616e6b547970655b705479706549445d203d20747275650a2020202072657475726e20276f6b270a656e640a0a0a66756e6374696f6e2067657454616e6b5479706528290a202020206c6f63616c20637572526573756c74203d207b7d0a20202020637572526573756c745b276d6574686f64275d203d202767657454616e6b54797065270a20202020637572526573756c745b2764617461275d203d206754616e6b547970650a2020202072657475726e206a736f6e2e656e636f646528637572526573756c74290a656e640a0a0a66756e6374696f6e205f726567506c6179657228290a2020202069662067506c617965725b67557365725d207e3d206e696c207468656e0a202020202020202072657475726e20276661696c270a20202020656e640a2020202067506c617965725b67557365725d203d207b7d0a2020202067506c617965725b67557365725d5b2762616c616e6365275d203d20300a2020202067506c617965725b67557365725d5b276e61697665275d203d20747275653b0a2020202067506c617965725b67557365725d5b27726f6f6d275d20203d202730270a2020202072657475726e20276f6b270a656e640a0a0a66756e6374696f6e205f637265617465526f6f6d287047616d6554797065290a202020206c6f63616c20637572496e6465783d2067526f6f6d496e6465780a2020202067526f6f6d5b637572496e6465785d203d207b7d0a2020202067526f6f6d5b637572496e6465785d5b276964275d203d20637572496e6465780a2020202067526f6f6d5b637572496e6465785d5b2774797065275d203d207047616d65547970650a2020202067526f6f6d5b637572496e6465785d5b2773746174275d203d202777616974270a2020202067526f6f6d5b637572496e6465785d5b2764617461275d203d207b7d0a2020202067526f6f6d5b637572496e6465785d5b277175657565275d3d207b7d0a2020202067526f6f6d5b637572496e6465785d5b277469636b275d203d207b7d0a2020202067526f6f6d5b637572496e6465785d5b27706c61796572275d203d207b7d0a2020202067526f6f6d5b637572496e6465785d5b2774696d65275d203d20300a2020202067526f6f6d5b637572496e6465785d5b27706c61796572636f756e74275d203d20310a202020202d2d67526f6f6d496e646578203d20746f737472696e6728746f6e756d6265722867526f6f6d496e64657829202b2031290a2020202072657475726e20637572496e6465780a656e640a0a0a66756e6374696f6e205f6a6f696e526f6f6d2870526f6f6d496e646578290a202020206c6f63616c2063757247616d6554797065203d2067526f6f6d5b70526f6f6d496e6465785d5b2774797065275d0a202020206c6f63616c20637572506c617965724d61783d206747616d65547970655b63757247616d65547970655d5b27706c617965726d6178275d0a2020202067526f6f6d5b70526f6f6d496e6465785d5b27706c61796572636f756e74275d203d2067526f6f6d5b70526f6f6d496e6465785d5b27706c61796572636f756e74275d2b310a2020202069662067526f6f6d5b70526f6f6d496e6465785d5b27706c61796572636f756e74275d203e3d20637572506c617965724d6178207468656e0a202020202020202067526f6f6d5b70526f6f6d496e6465785d5b2773746174275d203d20277374617274270a2020202020202020675374617274696e675b70526f6f6d496e6465785d203d20747275650a20202020656e640a656e640a0a0a66756e6374696f6e206a6f696e47616d6528704e616d652c7047616d65547970652c7054616e6b547970652c7044617461290a202020205f726567506c6179657228290a202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d652c704e616d652c7047616d65547970652c7054616e6b547970652c7044617461290a202020206966206747616d65547970655b7047616d65547970655d203d3d206e696c207468656e0a20202020202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d652c7047616d6554797065290a202020202020202072657475726e20276661696c270a20202020656e640a202020206966206754616e6b547970655b7054616e6b547970655d203d3d206e696c207468656e0a20202020202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d652c7054616e6b54797065290a202020202020202072657475726e20276661696c270a20202020656e640a2020202069662067506c617965725b67557365725d5b7054616e6b547970655d203d3d206e696c207468656e0a20202020202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d652c67506c617965725b67557365725d5b7054616e6b547970655d290a202020202020202072657475726e20276661696c270a20202020656e640a2020202069662067506c617965725b67557365725d5b27726f6f6d275d207e3d20273027207468656e0a20202020202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d652c67506c617965725b67557365725d5b27726f6f6d275d290a202020202020202072657475726e20276661696c270a20202020656e640a202020206c6f63616c20637572526f6f6d496e646578203d202731270a2020202069662067526f6f6d5b67526f6f6d496e6465785d203d3d206e696c207468656e0a2020202020202020637572526f6f6d496e646578203d205f637265617465526f6f6d287047616d6554797065290a20202020656c73650a202020202020202069662067526f6f6d5b67526f6f6d496e6465785d5b2773746174275d203d3d20277761697427207468656e0a202020202020202020202020637572526f6f6d496e646578203d2067526f6f6d496e6465780a2020202020202020202020205f6a6f696e526f6f6d28637572526f6f6d496e646578290a2020202020202020656c73650a20202020202020202020202067526f6f6d496e646578203d20746f737472696e6728746f6e756d6265722867526f6f6d496e64657829202b2031290a202020202020202020202020637572526f6f6d496e646578203d205f637265617465526f6f6d287047616d6554797065290a2020202020202020656e640a20202020656e640a2020202067506c617965725b67557365725d5b27726f6f6d275d203d20746f737472696e6728637572526f6f6d496e646578290a202020207461626c652e696e736572742867526f6f6d5b637572526f6f6d496e6465785d5b2764617461275d2c207044617461290a202020207461626c652e696e736572742867526f6f6d5b637572526f6f6d496e6465785d5b27706c61796572275d2c206755736572290a2020202072657475726e20637572526f6f6d496e6465780a656e640a0a0a66756e6374696f6e20676574526f6f6d2870526f6f6d4944290a202020206c6f63616c20637572526573756c74203d207b7d0a20202020637572526573756c745b276d6574686f64275d203d2027676574526f6f6d270a20202020637572526573756c745b2764617461275d203d2067526f6f6d5b70526f6f6d49445d0a2020202072657475726e206a736f6e2e656e636f646528637572526573756c74290a656e640a0a0a66756e6374696f6e206765745374617428290a202020206c6f63616c20637572526573756c74203d207b7d0a20202020637572526573756c745b276f776e6572275d203d2067557365720a20202020637572526573756c745b276d6574686f64275d203d202767657453746174270a20202020637572526573756c745b27726f6f6d275d20203d2067506c617965725b67557365725d5b27726f6f6d275d0a202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d65290a20202020696620637572526573756c745b27726f6f6d275d207e3d20273027207468656e0a2020202020202020637572526573756c745b2773746174275d203d2067526f6f6d5b637572526573756c745b27726f6f6d275d5d5b2773746174275d0a2020202020202020637572526573756c745b27706c61796572636f756e74275d203d2067526f6f6d5b637572526573756c745b27726f6f6d275d5d5b27706c61796572636f756e74275d0a2020202020202020637572526573756c745b2764617461275d203d2067526f6f6d5b637572526573756c745b27726f6f6d275d5d5b2764617461275d0a20202020656e640a2020202072657475726e206a736f6e2e656e636f646528637572526573756c74290a656e640a0a0a66756e6374696f6e20676574506c6179287044617461290a202020206c6f63616c20637572526f6f6d203d2067506c617965725b67557365725d5b27726f6f6d275d0a20202020696620637572526f6f6d203d3d20273027207468656e0a202020202020202072657475726e20276e756c6c270a20202020656e640a2020202069662067526f6f6d5b637572526f6f6d5d5b2773746174275d207e3d2027737461727427207468656e0a202020202020202072657475726e20276e756c6c270a20202020656e640a202020207461626c652e696e73657274282067526f6f6d5b637572526f6f6d5d5b277175657565275d2c20704461746120290a656e640a0a0a66756e6374696f6e206765745469636b2870496e646578290a202020206c6f63616c20637572526573756c74203d207b7d0a20202020637572526573756c745b27696e646578275d203d20746f6e756d6265722870496e646578290a20202020637572526573756c745b276d6574686f64275d20203d20276765745469636b270a202020206c6f63616c20637572526f6f6d203d2067506c617965725b67557365725d5b27726f6f6d275d0a20202020696620637572526f6f6d203d3d20273027207468656e0a20202020202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d65290a202020202020202072657475726e20276661696c270a20202020656e640a20202020696620746f6e756d6265722870496e64657829203e3d202367526f6f6d5b637572526f6f6d5d5b277469636b275d2b31207468656e0a202020202020202072657475726e20276661696c270a20202020656e640a20202020637572526573756c745b2764617461275d20203d2067526f6f6d5b637572526f6f6d5d5b277469636b275d5b746f6e756d6265722870496e646578295d0a2020202072657475726e206a736f6e2e656e636f646528637572526573756c74290a656e640a0a0a66756e6374696f6e20636c6f736547616d6528290a202020206c6f63616c20637572526f6f6d203d2067506c617965725b67557365725d5b27726f6f6d275d0a20202020696620637572526f6f6d203d3d20273027207468656e0a20202020202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d65290a202020202020202072657475726e20276661696c270a20202020656e640a2020202069662067526f6f6d5b637572526f6f6d5d5b2773746174275d207e3d2027737461727427207468656e0a20202020202020207072696e742864656275672e676574696e666f2831292e63757272656e746c696e652c64656275672e676574696e666f2831292e6e616d65290a202020202020202072657475726e20276661696c270a20202020656e640a20202020666f72206b657920696e2070616972732867526f6f6d5b637572526f6f6d5d5b27706c61796572275d2920646f0a202020202020202067506c617965725b67526f6f6d5b637572526f6f6d5d5b27706c61796572275d5b6b65795d5d5b27726f6f6d275d203d202730270a20202020656e640a20202020675374617274696e675b637572526f6f6d5d203d206e696c0a2020202067526f6f6d5b637572526f6f6d5d203d206e696c0a2020202072657475726e20276f6b270a656e64");
    std::cout << data.data() << std::endl;
    exit(-1);
    if(argc<3){
        BUG << "arg1 = time step";
        BUG << "arg2 = ip";
        BUG << "arg3 = contract";
        return 0;
    }else{
        BUG << argv[1];
        BUG << argv[2];
        BUG << argv[3];
    }
    argList.append(argv[1]);
    argList.append(argv[2]);
    argList.append(argv[3]);
    QCoreApplication a(argc, argv);
    Password *psd = new Password();
    Test0    *tt0 = new Test0();
    NetRequest *n = new NetRequest();
    psd->tgtIP = argv[2];
    psd->tgtCT = argv[3];

    psd->moveToThread(t[0]);
    tt0->moveToThread(t[1]);
    n->moveToThread(t[2]);
    QObject::connect(t[1],SIGNAL(started()),tt0,SLOT(onStart()),Qt::QueuedConnection);
    QObject::connect(t[2],SIGNAL(started()),n,SLOT(onStart()),Qt::QueuedConnection);

    int step = QString(argv[1]).toInt();
    //QObject::connect(gTimer,SIGNAL(timeout()),psd,SLOT(onTimeout()));
    //QObject::connect(gTimer,SIGNAL(timeout()),tt0,SLOT(onTimeout()));

    QObject::connect(psd,SIGNAL(doPost(QString,QString)),n,SLOT(onPost(QString,QString)),Qt::QueuedConnection);
    QObject::connect(tt0,SIGNAL(doGet(QString,QString)),n,SLOT(onGet(QString,QString)),Qt::QueuedConnection);
    QObject::connect(tt0,SIGNAL(doTimeout()),psd,SLOT(onTimeout()),Qt::QueuedConnection);

    QObject::connect(n,SIGNAL(doRsponse(QString)),tt0,SLOT(onTimeout(QString)),Qt::QueuedConnection);

    //gTimer->start(step);
    //tt0->onTimeout("");

    n->onStart();
    tt0->onStart();

    //t[2]->start();
    //t[0]->start();
    //t[1]->start();

    return a.exec();
}
